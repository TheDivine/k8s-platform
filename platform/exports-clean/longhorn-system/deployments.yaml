apiVersion: v1
items:
  - apiVersion: apps/v1
    kind: Deployment
    metadata:
      annotations:
        deployment.kubernetes.io/revision: "1"
        driver.longhorn.io/git-commit: 29b7fda2692c8df5b1aa18c477f77863c7acc1e7
        driver.longhorn.io/version: v1.10.1
        longhorn.io/last-applied-tolerations: '[]'
      labels:
        app: csi-attacher
        longhorn.io/managed-by: longhorn-manager
      name: csi-attacher
      namespace: longhorn-system
    spec:
      progressDeadlineSeconds: 600
      replicas: 3
      revisionHistoryLimit: 10
      selector:
        matchLabels:
          app: csi-attacher
      strategy:
        rollingUpdate:
          maxSurge: 25%
          maxUnavailable: 25%
        type: RollingUpdate
      template:
        metadata:
          creationTimestamp: null
          labels:
            app: csi-attacher
        spec:
          affinity:
            podAntiAffinity:
              preferredDuringSchedulingIgnoredDuringExecution:
                - podAffinityTerm:
                    labelSelector:
                      matchExpressions:
                        - key: app
                          operator: In
                          values:
                            - csi-attacher
                    topologyKey: kubernetes.io/hostname
                  weight: 1
          containers:
            - args:
                - --v=2
                - --csi-address=$(ADDRESS)
                - --timeout=1m50s
                - --leader-election
                - --leader-election-namespace=$(POD_NAMESPACE)
                - --kube-api-qps=50
                - --kube-api-burst=100
                - --http-endpoint=:8000
              env:
                - name: ADDRESS
                  value: /csi/csi.sock
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.namespace
                - name: NAMESPACE
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.namespace
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.name
              image: longhornio/csi-attacher:v4.10.0-20251030
              imagePullPolicy: IfNotPresent
              name: csi-attacher
              ports:
                - containerPort: 8000
                  name: csi-attacher
                  protocol: TCP
              resources: {}
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
              volumeMounts:
                - mountPath: /csi/
                  name: socket-dir
          dnsPolicy: ClusterFirst
          priorityClassName: longhorn-critical
          restartPolicy: Always
          schedulerName: default-scheduler
          securityContext: {}
          serviceAccount: longhorn-service-account
          serviceAccountName: longhorn-service-account
          terminationGracePeriodSeconds: 30
          volumes:
            - hostPath:
                path: /var/lib/kubelet/plugins/driver.longhorn.io
                type: DirectoryOrCreate
              name: socket-dir
  - apiVersion: apps/v1
    kind: Deployment
    metadata:
      annotations:
        deployment.kubernetes.io/revision: "1"
        driver.longhorn.io/git-commit: 29b7fda2692c8df5b1aa18c477f77863c7acc1e7
        driver.longhorn.io/version: v1.10.1
        longhorn.io/last-applied-tolerations: '[]'
      labels:
        app: csi-provisioner
        longhorn.io/managed-by: longhorn-manager
      name: csi-provisioner
      namespace: longhorn-system
    spec:
      progressDeadlineSeconds: 600
      replicas: 3
      revisionHistoryLimit: 10
      selector:
        matchLabels:
          app: csi-provisioner
      strategy:
        rollingUpdate:
          maxSurge: 25%
          maxUnavailable: 25%
        type: RollingUpdate
      template:
        metadata:
          creationTimestamp: null
          labels:
            app: csi-provisioner
        spec:
          affinity:
            podAntiAffinity:
              preferredDuringSchedulingIgnoredDuringExecution:
                - podAffinityTerm:
                    labelSelector:
                      matchExpressions:
                        - key: app
                          operator: In
                          values:
                            - csi-provisioner
                    topologyKey: kubernetes.io/hostname
                  weight: 1
          containers:
            - args:
                - --v=2
                - --csi-address=$(ADDRESS)
                - --timeout=1m50s
                - --leader-election
                - --leader-election-namespace=$(POD_NAMESPACE)
                - --default-fstype=ext4
                - --enable-capacity
                - --capacity-ownerref-level=2
                - --kube-api-qps=50
                - --kube-api-burst=100
                - --http-endpoint=:8000
              env:
                - name: ADDRESS
                  value: /csi/csi.sock
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.namespace
                - name: NAMESPACE
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.namespace
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.name
              image: longhornio/csi-provisioner:v5.3.0-20251030
              imagePullPolicy: IfNotPresent
              name: csi-provisioner
              ports:
                - containerPort: 8000
                  name: csi-provisioner
                  protocol: TCP
              resources: {}
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
              volumeMounts:
                - mountPath: /csi/
                  name: socket-dir
          dnsPolicy: ClusterFirst
          priorityClassName: longhorn-critical
          restartPolicy: Always
          schedulerName: default-scheduler
          securityContext: {}
          serviceAccount: longhorn-service-account
          serviceAccountName: longhorn-service-account
          terminationGracePeriodSeconds: 30
          volumes:
            - hostPath:
                path: /var/lib/kubelet/plugins/driver.longhorn.io
                type: DirectoryOrCreate
              name: socket-dir
  - apiVersion: apps/v1
    kind: Deployment
    metadata:
      annotations:
        deployment.kubernetes.io/revision: "1"
        driver.longhorn.io/git-commit: 29b7fda2692c8df5b1aa18c477f77863c7acc1e7
        driver.longhorn.io/version: v1.10.1
        longhorn.io/last-applied-tolerations: '[]'
      labels:
        app: csi-resizer
        longhorn.io/managed-by: longhorn-manager
      name: csi-resizer
      namespace: longhorn-system
    spec:
      progressDeadlineSeconds: 600
      replicas: 3
      revisionHistoryLimit: 10
      selector:
        matchLabels:
          app: csi-resizer
      strategy:
        rollingUpdate:
          maxSurge: 25%
          maxUnavailable: 25%
        type: RollingUpdate
      template:
        metadata:
          creationTimestamp: null
          labels:
            app: csi-resizer
        spec:
          affinity:
            podAntiAffinity:
              preferredDuringSchedulingIgnoredDuringExecution:
                - podAffinityTerm:
                    labelSelector:
                      matchExpressions:
                        - key: app
                          operator: In
                          values:
                            - csi-resizer
                    topologyKey: kubernetes.io/hostname
                  weight: 1
          containers:
            - args:
                - --v=2
                - --csi-address=$(ADDRESS)
                - --timeout=1m50s
                - --leader-election
                - --leader-election-namespace=$(POD_NAMESPACE)
                - --leader-election-namespace=$(POD_NAMESPACE)
                - --kube-api-qps=50
                - --kube-api-burst=100
                - --http-endpoint=:8000
                - --handle-volume-inuse-error=false
                - --feature-gates=RecoverVolumeExpansionFailure=false
              env:
                - name: ADDRESS
                  value: /csi/csi.sock
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.namespace
                - name: NAMESPACE
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.namespace
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.name
              image: longhornio/csi-resizer:v1.14.0-20251030
              imagePullPolicy: IfNotPresent
              name: csi-resizer
              ports:
                - containerPort: 8000
                  name: csi-resizer
                  protocol: TCP
              resources: {}
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
              volumeMounts:
                - mountPath: /csi/
                  name: socket-dir
          dnsPolicy: ClusterFirst
          priorityClassName: longhorn-critical
          restartPolicy: Always
          schedulerName: default-scheduler
          securityContext: {}
          serviceAccount: longhorn-service-account
          serviceAccountName: longhorn-service-account
          terminationGracePeriodSeconds: 30
          volumes:
            - hostPath:
                path: /var/lib/kubelet/plugins/driver.longhorn.io
                type: DirectoryOrCreate
              name: socket-dir
  - apiVersion: apps/v1
    kind: Deployment
    metadata:
      annotations:
        deployment.kubernetes.io/revision: "1"
        driver.longhorn.io/git-commit: 29b7fda2692c8df5b1aa18c477f77863c7acc1e7
        driver.longhorn.io/version: v1.10.1
        longhorn.io/last-applied-tolerations: '[]'
      labels:
        app: csi-snapshotter
        longhorn.io/managed-by: longhorn-manager
      name: csi-snapshotter
      namespace: longhorn-system
    spec:
      progressDeadlineSeconds: 600
      replicas: 3
      revisionHistoryLimit: 10
      selector:
        matchLabels:
          app: csi-snapshotter
      strategy:
        rollingUpdate:
          maxSurge: 25%
          maxUnavailable: 25%
        type: RollingUpdate
      template:
        metadata:
          creationTimestamp: null
          labels:
            app: csi-snapshotter
        spec:
          affinity:
            podAntiAffinity:
              preferredDuringSchedulingIgnoredDuringExecution:
                - podAffinityTerm:
                    labelSelector:
                      matchExpressions:
                        - key: app
                          operator: In
                          values:
                            - csi-snapshotter
                    topologyKey: kubernetes.io/hostname
                  weight: 1
          containers:
            - args:
                - --v=2
                - --csi-address=$(ADDRESS)
                - --timeout=1m50s
                - --leader-election
                - --leader-election-namespace=$(POD_NAMESPACE)
                - --kube-api-qps=50
                - --kube-api-burst=100
                - --http-endpoint=:8000
              env:
                - name: ADDRESS
                  value: /csi/csi.sock
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.namespace
                - name: NAMESPACE
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.namespace
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.name
              image: longhornio/csi-snapshotter:v8.4.0-20251030
              imagePullPolicy: IfNotPresent
              name: csi-snapshotter
              ports:
                - containerPort: 8000
                  name: csi-snapshotter
                  protocol: TCP
              resources: {}
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
              volumeMounts:
                - mountPath: /csi/
                  name: socket-dir
          dnsPolicy: ClusterFirst
          priorityClassName: longhorn-critical
          restartPolicy: Always
          schedulerName: default-scheduler
          securityContext: {}
          serviceAccount: longhorn-service-account
          serviceAccountName: longhorn-service-account
          terminationGracePeriodSeconds: 30
          volumes:
            - hostPath:
                path: /var/lib/kubelet/plugins/driver.longhorn.io
                type: DirectoryOrCreate
              name: socket-dir
  - apiVersion: apps/v1
    kind: Deployment
    metadata:
      annotations:
        deployment.kubernetes.io/revision: "1"
        meta.helm.sh/release-name: longhorn
        meta.helm.sh/release-namespace: longhorn-system
      labels:
        app.kubernetes.io/instance: longhorn
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: longhorn
        app.kubernetes.io/version: v1.10.1
        helm.sh/chart: longhorn-1.10.1
      name: longhorn-driver-deployer
      namespace: longhorn-system
    spec:
      progressDeadlineSeconds: 600
      replicas: 1
      revisionHistoryLimit: 10
      selector:
        matchLabels:
          app: longhorn-driver-deployer
      strategy:
        rollingUpdate:
          maxSurge: 25%
          maxUnavailable: 25%
        type: RollingUpdate
      template:
        metadata:
          creationTimestamp: null
          labels:
            app: longhorn-driver-deployer
            app.kubernetes.io/instance: longhorn
            app.kubernetes.io/managed-by: Helm
            app.kubernetes.io/name: longhorn
            app.kubernetes.io/version: v1.10.1
            helm.sh/chart: longhorn-1.10.1
        spec:
          containers:
            - command:
                - longhorn-manager
                - -d
                - deploy-driver
                - --manager-image
                - longhornio/longhorn-manager:v1.10.1
                - --manager-url
                - http://longhorn-backend:9500/v1
              env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.namespace
                - name: NODE_NAME
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: spec.nodeName
                - name: SERVICE_ACCOUNT
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: spec.serviceAccountName
                - name: CSI_ATTACHER_IMAGE
                  value: longhornio/csi-attacher:v4.10.0-20251030
                - name: CSI_PROVISIONER_IMAGE
                  value: longhornio/csi-provisioner:v5.3.0-20251030
                - name: CSI_NODE_DRIVER_REGISTRAR_IMAGE
                  value: longhornio/csi-node-driver-registrar:v2.15.0-20251030
                - name: CSI_RESIZER_IMAGE
                  value: longhornio/csi-resizer:v1.14.0-20251030
                - name: CSI_SNAPSHOTTER_IMAGE
                  value: longhornio/csi-snapshotter:v8.4.0-20251030
                - name: CSI_LIVENESS_PROBE_IMAGE
                  value: longhornio/livenessprobe:v2.17.0-20251030
              image: longhornio/longhorn-manager:v1.10.1
              imagePullPolicy: IfNotPresent
              name: longhorn-driver-deployer
              resources: {}
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
          dnsPolicy: ClusterFirst
          initContainers:
            - command:
                - sh
                - -c
                - while [ $(curl -m 1 -s -o /dev/null -w "%{http_code}" http://longhorn-backend:9500/v1) != "200" ]; do echo waiting; sleep 2; done
              image: longhornio/longhorn-manager:v1.10.1
              imagePullPolicy: IfNotPresent
              name: wait-longhorn-manager
              resources: {}
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
          priorityClassName: longhorn-critical
          restartPolicy: Always
          schedulerName: default-scheduler
          securityContext:
            runAsUser: 0
          serviceAccount: longhorn-service-account
          serviceAccountName: longhorn-service-account
          terminationGracePeriodSeconds: 30
  - apiVersion: apps/v1
    kind: Deployment
    metadata:
      annotations:
        deployment.kubernetes.io/revision: "1"
        meta.helm.sh/release-name: longhorn
        meta.helm.sh/release-namespace: longhorn-system
      labels:
        app: longhorn-ui
        app.kubernetes.io/instance: longhorn
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: longhorn
        app.kubernetes.io/version: v1.10.1
        helm.sh/chart: longhorn-1.10.1
      name: longhorn-ui
      namespace: longhorn-system
    spec:
      progressDeadlineSeconds: 600
      replicas: 2
      revisionHistoryLimit: 10
      selector:
        matchLabels:
          app: longhorn-ui
      strategy:
        rollingUpdate:
          maxSurge: 25%
          maxUnavailable: 25%
        type: RollingUpdate
      template:
        metadata:
          creationTimestamp: null
          labels:
            app: longhorn-ui
            app.kubernetes.io/instance: longhorn
            app.kubernetes.io/managed-by: Helm
            app.kubernetes.io/name: longhorn
            app.kubernetes.io/version: v1.10.1
            helm.sh/chart: longhorn-1.10.1
        spec:
          affinity:
            podAntiAffinity:
              preferredDuringSchedulingIgnoredDuringExecution:
                - podAffinityTerm:
                    labelSelector:
                      matchExpressions:
                        - key: app
                          operator: In
                          values:
                            - longhorn-ui
                    topologyKey: kubernetes.io/hostname
                  weight: 1
          containers:
            - env:
                - name: LONGHORN_MANAGER_IP
                  value: http://longhorn-backend:9500
                - name: LONGHORN_UI_PORT
                  value: "8000"
              image: longhornio/longhorn-ui:v1.10.1
              imagePullPolicy: IfNotPresent
              name: longhorn-ui
              ports:
                - containerPort: 8000
                  name: http
                  protocol: TCP
              resources: {}
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
              volumeMounts:
                - mountPath: /var/cache/nginx/
                  name: nginx-cache
                - mountPath: /var/config/nginx/
                  name: nginx-config
                - mountPath: /var/run/
                  name: var-run
          dnsPolicy: ClusterFirst
          priorityClassName: longhorn-critical
          restartPolicy: Always
          schedulerName: default-scheduler
          securityContext: {}
          serviceAccount: longhorn-ui-service-account
          serviceAccountName: longhorn-ui-service-account
          terminationGracePeriodSeconds: 30
          volumes:
            - emptyDir: {}
              name: nginx-cache
            - emptyDir: {}
              name: nginx-config
            - emptyDir: {}
              name: var-run
kind: List
metadata: {}
