apiVersion: v1
items:
  - apiVersion: networking.k8s.io/v1
    kind: Ingress
    metadata:
      annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: web
        traefik.ingress.kubernetes.io/router.middlewares: drone-https-redirect@kubernetescrd
      name: droneserver-http
      namespace: drone
    spec:
      ingressClassName: traefik
      rules:
        - host: drone.kwiki.it.com
          http:
            paths:
              - backend:
                  service:
                    name: droneserver
                    port:
                      number: 80
                path: /
                pathType: Prefix
  - apiVersion: networking.k8s.io/v1
    kind: Ingress
    metadata:
      annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
        traefik.ingress.kubernetes.io/router.tls: "true"
        traefik.ingress.kubernetes.io/router.tls.certresolver: le
      name: droneserver-https
      namespace: drone
    spec:
      ingressClassName: traefik
      rules:
        - host: drone.kwiki.it.com
          http:
            paths:
              - backend:
                  service:
                    name: droneserver
                    port:
                      number: 80
                path: /
                pathType: Prefix
      tls:
        - hosts:
            - drone.kwiki.it.com
kind: List
metadata: {}
