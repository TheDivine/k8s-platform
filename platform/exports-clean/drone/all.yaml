apiVersion: v1
items:
  - apiVersion: v1
    kind: Pod
    metadata:
      annotations:
        cni.projectcalico.org/containerID: 6ec0a64a59285acc4bd037538bd54ff8355a440c6c2daf88726a6920354080cc
        cni.projectcalico.org/podIP: 10.244.101.148/32
        cni.projectcalico.org/podIPs: 10.244.101.148/32
        kubectl.kubernetes.io/restartedAt: "2025-10-24T15:49:20Z"
      generateName: drone-server-7cd8d6dd98-
      labels:
        app: drone-server
        pod-template-hash: 7cd8d6dd98
      name: drone-server-7cd8d6dd98-lg5kn
      namespace: drone
      ownerReferences:
        - apiVersion: apps/v1
          blockOwnerDeletion: true
          controller: true
          kind: ReplicaSet
          name: drone-server-7cd8d6dd98
          uid: 63e7d39f-d27a-4fd5-a2b5-3f22ab510625
    spec:
      containers:
        - env:
            - name: DRONE_SERVER_HOST
              valueFrom:
                secretKeyRef:
                  key: DRONE_SERVER_HOST
                  name: drone-server-secret
            - name: DRONE_SERVER_PROTO
              value: https
            - name: DRONE_RPC_SECRET
              valueFrom:
                secretKeyRef:
                  key: DRONE_RPC_SECRET
                  name: drone-server-secret
            - name: DRONE_DATABASE_DRIVER
              value: postgres
            - name: DRONE_DATABASE_DATASOURCE
              valueFrom:
                secretKeyRef:
                  key: DRONE_DATABASE_DATASOURCE
                  name: drone-server-secret
            - name: DRONE_USER_CREATE
              valueFrom:
                secretKeyRef:
                  key: DRONE_USER_CREATE
                  name: drone-server-secret
            - name: DRONE_GITHUB_CLIENT_ID
              valueFrom:
                secretKeyRef:
                  key: DRONE_GITHUB_CLIENT_ID
                  name: drone-server-secret
            - name: DRONE_GITHUB_CLIENT_SECRET
              valueFrom:
                secretKeyRef:
                  key: DRONE_GITHUB_CLIENT_SECRET
                  name: drone-server-secret
          image: drone/drone:2
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /
              port: http
              scheme: HTTP
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: drone-server
          ports:
            - containerPort: 80
              name: http
              protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /
              port: http
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
            - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
              name: kube-api-access-b8q6w
              readOnly: true
      dnsPolicy: ClusterFirst
      enableServiceLinks: true
      nodeName: s231226.wholesaleinternet.net
      nodeSelector:
        kubernetes.io/hostname: s231226.wholesaleinternet.net
      preemptionPolicy: PreemptLowerPriority
      priority: 0
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: default
      serviceAccountName: default
      terminationGracePeriodSeconds: 30
      tolerations:
        - effect: NoExecute
          key: node.kubernetes.io/not-ready
          operator: Exists
          tolerationSeconds: 300
        - effect: NoExecute
          key: node.kubernetes.io/unreachable
          operator: Exists
          tolerationSeconds: 300
      volumes:
        - name: kube-api-access-b8q6w
          projected:
            defaultMode: 420
            sources:
              - serviceAccountToken:
                  expirationSeconds: 3607
                  path: token
              - configMap:
                  items:
                    - key: ca.crt
                      path: ca.crt
                  name: kube-root-ca.crt
              - downwardAPI:
                  items:
                    - fieldRef:
                        apiVersion: v1
                        fieldPath: metadata.namespace
                      path: namespace
  - apiVersion: v1
    kind: Pod
    metadata:
      annotations:
        cni.projectcalico.org/containerID: ae09793727f890e673ec295a6d70205b6f9891a22bb7f643846685c1d5a2e4ea
        cni.projectcalico.org/podIP: 10.244.101.153/32
        cni.projectcalico.org/podIPs: 10.244.101.153/32
      generateName: postgres-
      labels:
        app: postgres
        apps.kubernetes.io/pod-index: "0"
        controller-revision-hash: postgres-7bb5848cdb
        statefulset.kubernetes.io/pod-name: postgres-0
      name: postgres-0
      namespace: drone
      ownerReferences:
        - apiVersion: apps/v1
          blockOwnerDeletion: true
          controller: true
          kind: StatefulSet
          name: postgres
          uid: 7f8975c6-ffce-4e93-925f-f030092e5669
    spec:
      containers:
        - envFrom:
            - configMapRef:
                name: postgres-config
          image: postgres:15
          imagePullPolicy: IfNotPresent
          name: postgres
          ports:
            - containerPort: 5432
              protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
            - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
              name: kube-api-access-r5pkr
              readOnly: true
      dnsPolicy: ClusterFirst
      enableServiceLinks: true
      hostname: postgres-0
      nodeName: s231226.wholesaleinternet.net
      preemptionPolicy: PreemptLowerPriority
      priority: 0
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: default
      serviceAccountName: default
      subdomain: postgres
      terminationGracePeriodSeconds: 30
      tolerations:
        - effect: NoExecute
          key: node.kubernetes.io/not-ready
          operator: Exists
          tolerationSeconds: 300
        - effect: NoExecute
          key: node.kubernetes.io/unreachable
          operator: Exists
          tolerationSeconds: 300
      volumes:
        - name: kube-api-access-r5pkr
          projected:
            defaultMode: 420
            sources:
              - serviceAccountToken:
                  expirationSeconds: 3607
                  path: token
              - configMap:
                  items:
                    - key: ca.crt
                      path: ca.crt
                  name: kube-root-ca.crt
              - downwardAPI:
                  items:
                    - fieldRef:
                        apiVersion: v1
                        fieldPath: metadata.namespace
                      path: namespace
  - apiVersion: v1
    kind: Service
    metadata:
      annotations: {}
      labels:
        app: drone-server
      name: droneserver
      namespace: drone
    spec:
      clusterIP: 10.104.157.136
      clusterIPs:
        - 10.104.157.136
      internalTrafficPolicy: Cluster
      ipFamilies:
        - IPv4
      ipFamilyPolicy: SingleStack
      ports:
        - name: http
          port: 80
          protocol: TCP
          targetPort: 80
      selector:
        app: drone-server
      sessionAffinity: None
      type: ClusterIP
  - apiVersion: v1
    kind: Service
    metadata:
      annotations: {}
      labels:
        app: postgres
      name: postgres
      namespace: drone
    spec:
      clusterIP: 10.111.221.242
      clusterIPs:
        - 10.111.221.242
      internalTrafficPolicy: Cluster
      ipFamilies:
        - IPv4
      ipFamilyPolicy: SingleStack
      ports:
        - name: http
          port: 5432
          protocol: TCP
          targetPort: 5432
      selector:
        app: postgres
      sessionAffinity: None
      type: ClusterIP
  - apiVersion: apps/v1
    kind: Deployment
    metadata:
      annotations:
        deployment.kubernetes.io/revision: "2"
      labels:
        app: drone-server
      name: drone-server
      namespace: drone
    spec:
      progressDeadlineSeconds: 600
      replicas: 1
      revisionHistoryLimit: 10
      selector:
        matchLabels:
          app: drone-server
      strategy:
        rollingUpdate:
          maxSurge: 25%
          maxUnavailable: 25%
        type: RollingUpdate
      template:
        metadata:
          annotations:
            kubectl.kubernetes.io/restartedAt: "2025-10-24T15:49:20Z"
          creationTimestamp: null
          labels:
            app: drone-server
        spec:
          containers:
            - env:
                - name: DRONE_SERVER_HOST
                  valueFrom:
                    secretKeyRef:
                      key: DRONE_SERVER_HOST
                      name: drone-server-secret
                - name: DRONE_SERVER_PROTO
                  value: https
                - name: DRONE_RPC_SECRET
                  valueFrom:
                    secretKeyRef:
                      key: DRONE_RPC_SECRET
                      name: drone-server-secret
                - name: DRONE_DATABASE_DRIVER
                  value: postgres
                - name: DRONE_DATABASE_DATASOURCE
                  valueFrom:
                    secretKeyRef:
                      key: DRONE_DATABASE_DATASOURCE
                      name: drone-server-secret
                - name: DRONE_USER_CREATE
                  valueFrom:
                    secretKeyRef:
                      key: DRONE_USER_CREATE
                      name: drone-server-secret
                - name: DRONE_GITHUB_CLIENT_ID
                  valueFrom:
                    secretKeyRef:
                      key: DRONE_GITHUB_CLIENT_ID
                      name: drone-server-secret
                - name: DRONE_GITHUB_CLIENT_SECRET
                  valueFrom:
                    secretKeyRef:
                      key: DRONE_GITHUB_CLIENT_SECRET
                      name: drone-server-secret
              image: drone/drone:2
              imagePullPolicy: IfNotPresent
              livenessProbe:
                failureThreshold: 3
                httpGet:
                  path: /
                  port: http
                  scheme: HTTP
                initialDelaySeconds: 20
                periodSeconds: 20
                successThreshold: 1
                timeoutSeconds: 1
              name: drone-server
              ports:
                - containerPort: 80
                  name: http
                  protocol: TCP
              readinessProbe:
                failureThreshold: 3
                httpGet:
                  path: /
                  port: http
                  scheme: HTTP
                initialDelaySeconds: 5
                periodSeconds: 10
                successThreshold: 1
                timeoutSeconds: 1
              resources: {}
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
          dnsPolicy: ClusterFirst
          nodeSelector:
            kubernetes.io/hostname: s231226.wholesaleinternet.net
          restartPolicy: Always
          schedulerName: default-scheduler
          securityContext: {}
          terminationGracePeriodSeconds: 30
  - apiVersion: apps/v1
    kind: ReplicaSet
    metadata:
      annotations:
        deployment.kubernetes.io/desired-replicas: "1"
        deployment.kubernetes.io/max-replicas: "2"
        deployment.kubernetes.io/revision: "2"
      labels:
        app: drone-server
        pod-template-hash: 7cd8d6dd98
      name: drone-server-7cd8d6dd98
      namespace: drone
      ownerReferences:
        - apiVersion: apps/v1
          blockOwnerDeletion: true
          controller: true
          kind: Deployment
          name: drone-server
          uid: 4b22df93-f955-4055-9c8e-bcab955b0d61
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: drone-server
          pod-template-hash: 7cd8d6dd98
      template:
        metadata:
          annotations:
            kubectl.kubernetes.io/restartedAt: "2025-10-24T15:49:20Z"
          creationTimestamp: null
          labels:
            app: drone-server
            pod-template-hash: 7cd8d6dd98
        spec:
          containers:
            - env:
                - name: DRONE_SERVER_HOST
                  valueFrom:
                    secretKeyRef:
                      key: DRONE_SERVER_HOST
                      name: drone-server-secret
                - name: DRONE_SERVER_PROTO
                  value: https
                - name: DRONE_RPC_SECRET
                  valueFrom:
                    secretKeyRef:
                      key: DRONE_RPC_SECRET
                      name: drone-server-secret
                - name: DRONE_DATABASE_DRIVER
                  value: postgres
                - name: DRONE_DATABASE_DATASOURCE
                  valueFrom:
                    secretKeyRef:
                      key: DRONE_DATABASE_DATASOURCE
                      name: drone-server-secret
                - name: DRONE_USER_CREATE
                  valueFrom:
                    secretKeyRef:
                      key: DRONE_USER_CREATE
                      name: drone-server-secret
                - name: DRONE_GITHUB_CLIENT_ID
                  valueFrom:
                    secretKeyRef:
                      key: DRONE_GITHUB_CLIENT_ID
                      name: drone-server-secret
                - name: DRONE_GITHUB_CLIENT_SECRET
                  valueFrom:
                    secretKeyRef:
                      key: DRONE_GITHUB_CLIENT_SECRET
                      name: drone-server-secret
              image: drone/drone:2
              imagePullPolicy: IfNotPresent
              livenessProbe:
                failureThreshold: 3
                httpGet:
                  path: /
                  port: http
                  scheme: HTTP
                initialDelaySeconds: 20
                periodSeconds: 20
                successThreshold: 1
                timeoutSeconds: 1
              name: drone-server
              ports:
                - containerPort: 80
                  name: http
                  protocol: TCP
              readinessProbe:
                failureThreshold: 3
                httpGet:
                  path: /
                  port: http
                  scheme: HTTP
                initialDelaySeconds: 5
                periodSeconds: 10
                successThreshold: 1
                timeoutSeconds: 1
              resources: {}
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
          dnsPolicy: ClusterFirst
          nodeSelector:
            kubernetes.io/hostname: s231226.wholesaleinternet.net
          restartPolicy: Always
          schedulerName: default-scheduler
          securityContext: {}
          terminationGracePeriodSeconds: 30
  - apiVersion: apps/v1
    kind: StatefulSet
    metadata:
      annotations: {}
      name: postgres
      namespace: drone
    spec:
      persistentVolumeClaimRetentionPolicy:
        whenDeleted: Retain
        whenScaled: Retain
      podManagementPolicy: OrderedReady
      replicas: 1
      revisionHistoryLimit: 10
      selector:
        matchLabels:
          app: postgres
      serviceName: postgres
      template:
        metadata:
          creationTimestamp: null
          labels:
            app: postgres
        spec:
          containers:
            - envFrom:
                - configMapRef:
                    name: postgres-config
              image: postgres:15
              imagePullPolicy: IfNotPresent
              name: postgres
              ports:
                - containerPort: 5432
                  protocol: TCP
              resources: {}
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
          dnsPolicy: ClusterFirst
          restartPolicy: Always
          schedulerName: default-scheduler
          securityContext: {}
          terminationGracePeriodSeconds: 30
      updateStrategy:
        rollingUpdate:
          partition: 0
        type: RollingUpdate
kind: List
metadata: {}
