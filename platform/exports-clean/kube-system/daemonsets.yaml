apiVersion: v1
items:
  - apiVersion: apps/v1
    kind: DaemonSet
    metadata:
      annotations:
        deprecated.daemonset.template.generation: "12"
      labels:
        k8s-app: calico-node
      name: calico-node
      namespace: kube-system
    spec:
      revisionHistoryLimit: 10
      selector:
        matchLabels:
          k8s-app: calico-node
      template:
        metadata:
          annotations:
            kubectl.kubernetes.io/restartedAt: "2025-10-24T13:49:27Z"
          creationTimestamp: null
          labels:
            k8s-app: calico-node
        spec:
          containers:
            - env:
                - name: DATASTORE_TYPE
                  value: kubernetes
                - name: WAIT_FOR_DATASTORE
                  value: "true"
                - name: NODENAME
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: spec.nodeName
                - name: CALICO_NETWORKING_BACKEND
                  value: vxlan
                - name: CLUSTER_TYPE
                  value: k8s,bgp
                - name: IP
                  value: autodetect
                - name: CALICO_IPV4POOL_IPIP
                  value: Never
                - name: CALICO_IPV4POOL_VXLAN
                  value: Always
                - name: CALICO_IPV6POOL_VXLAN
                  value: Never
                - name: FELIX_IPINIPMTU
                  valueFrom:
                    configMapKeyRef:
                      key: veth_mtu
                      name: calico-config
                - name: FELIX_VXLANMTU
                  valueFrom:
                    configMapKeyRef:
                      key: veth_mtu
                      name: calico-config
                - name: FELIX_WIREGUARDMTU
                  valueFrom:
                    configMapKeyRef:
                      key: veth_mtu
                      name: calico-config
                - name: CALICO_DISABLE_FILE_LOGGING
                  value: "true"
                - name: FELIX_DEFAULTENDPOINTTOHOSTACTION
                  value: ACCEPT
                - name: FELIX_IPV6SUPPORT
                  value: "false"
                - name: FELIX_HEALTHENABLED
                  value: "true"
                - name: IP_AUTODETECTION_METHOD
                  value: interface=wg-k8s
                - name: CALICO_DISABLE_BGP
                  value: "true"
              envFrom:
                - configMapRef:
                    name: kubernetes-services-endpoint
                    optional: true
              image: docker.io/calico/node:v3.25.0
              imagePullPolicy: IfNotPresent
              lifecycle:
                preStop:
                  exec:
                    command:
                      - /bin/calico-node
                      - -shutdown
              livenessProbe:
                exec:
                  command:
                    - /bin/calico-node
                    - -felix-live
                failureThreshold: 6
                initialDelaySeconds: 10
                periodSeconds: 10
                successThreshold: 1
                timeoutSeconds: 10
              name: calico-node
              readinessProbe:
                exec:
                  command:
                    - /bin/calico-node
                    - -felix-ready
                failureThreshold: 3
                periodSeconds: 10
                successThreshold: 1
                timeoutSeconds: 10
              resources:
                requests:
                  cpu: 250m
              securityContext:
                privileged: true
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
              volumeMounts:
                - mountPath: /host/etc/cni/net.d
                  name: cni-net-dir
                - mountPath: /lib/modules
                  name: lib-modules
                  readOnly: true
                - mountPath: /run/xtables.lock
                  name: xtables-lock
                - mountPath: /var/run/calico
                  name: var-run-calico
                - mountPath: /var/lib/calico
                  name: var-lib-calico
                - mountPath: /var/run/nodeagent
                  name: policysync
                - mountPath: /sys/fs/bpf
                  name: bpffs
                - mountPath: /var/log/calico/cni
                  name: cni-log-dir
                  readOnly: true
          dnsPolicy: ClusterFirst
          hostNetwork: true
          initContainers:
            - command:
                - /opt/cni/bin/calico-ipam
                - -upgrade
              env:
                - name: KUBERNETES_NODE_NAME
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: spec.nodeName
                - name: CALICO_NETWORKING_BACKEND
                  value: vxlan
                - name: CALICO_IPV4POOL_IPIP
                  value: Never
                - name: CALICO_IPV4POOL_VXLAN
                  value: Always
                - name: IP_AUTODETECTION_METHOD
                  value: interface=wg-k8s
                - name: CALICO_DISABLE_BGP
                  value: "true"
              envFrom:
                - configMapRef:
                    name: kubernetes-services-endpoint
                    optional: true
              image: docker.io/calico/cni:v3.25.0
              imagePullPolicy: IfNotPresent
              name: upgrade-ipam
              resources: {}
              securityContext:
                privileged: true
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
              volumeMounts:
                - mountPath: /var/lib/cni/networks
                  name: host-local-net-dir
                - mountPath: /host/opt/cni/bin
                  name: cni-bin-dir
            - command:
                - /opt/cni/bin/install
              env:
                - name: CNI_CONF_NAME
                  value: 10-calico.conflist
                - name: CNI_NETWORK_CONFIG
                  valueFrom:
                    configMapKeyRef:
                      key: cni_network_config
                      name: calico-config
                - name: KUBERNETES_NODE_NAME
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: spec.nodeName
                - name: CNI_MTU
                  valueFrom:
                    configMapKeyRef:
                      key: veth_mtu
                      name: calico-config
                - name: SLEEP
                  value: "false"
                - name: CALICO_NETWORKING_BACKEND
                  value: vxlan
                - name: CALICO_IPV4POOL_IPIP
                  value: Never
                - name: CALICO_IPV4POOL_VXLAN
                  value: Always
                - name: IP_AUTODETECTION_METHOD
                  value: interface=wg-k8s
                - name: CALICO_DISABLE_BGP
                  value: "true"
              envFrom:
                - configMapRef:
                    name: kubernetes-services-endpoint
                    optional: true
              image: docker.io/calico/cni:v3.25.0
              imagePullPolicy: IfNotPresent
              name: install-cni
              resources: {}
              securityContext:
                privileged: true
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
              volumeMounts:
                - mountPath: /host/opt/cni/bin
                  name: cni-bin-dir
                - mountPath: /host/etc/cni/net.d
                  name: cni-net-dir
            - command:
                - calico-node
                - -init
                - -best-effort
              env:
                - name: CALICO_NETWORKING_BACKEND
                  value: vxlan
                - name: CALICO_IPV4POOL_IPIP
                  value: Never
                - name: CALICO_IPV4POOL_VXLAN
                  value: Always
                - name: IP_AUTODETECTION_METHOD
                  value: interface=wg-k8s
                - name: CALICO_DISABLE_BGP
                  value: "true"
              image: docker.io/calico/node:v3.25.0
              imagePullPolicy: IfNotPresent
              name: mount-bpffs
              resources: {}
              securityContext:
                privileged: true
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
              volumeMounts:
                - mountPath: /sys/fs
                  mountPropagation: Bidirectional
                  name: sys-fs
                - mountPath: /var/run/calico
                  mountPropagation: Bidirectional
                  name: var-run-calico
                - mountPath: /nodeproc
                  name: nodeproc
                  readOnly: true
          nodeSelector:
            kubernetes.io/os: linux
          priorityClassName: system-node-critical
          restartPolicy: Always
          schedulerName: default-scheduler
          securityContext: {}
          serviceAccount: calico-node
          serviceAccountName: calico-node
          terminationGracePeriodSeconds: 0
          tolerations:
            - effect: NoSchedule
              operator: Exists
            - key: CriticalAddonsOnly
              operator: Exists
            - effect: NoExecute
              operator: Exists
          volumes:
            - hostPath:
                path: /lib/modules
                type: ""
              name: lib-modules
            - hostPath:
                path: /var/run/calico
                type: ""
              name: var-run-calico
            - hostPath:
                path: /var/lib/calico
                type: ""
              name: var-lib-calico
            - hostPath:
                path: /run/xtables.lock
                type: FileOrCreate
              name: xtables-lock
            - hostPath:
                path: /sys/fs/
                type: DirectoryOrCreate
              name: sys-fs
            - hostPath:
                path: /sys/fs/bpf
                type: Directory
              name: bpffs
            - hostPath:
                path: /proc
                type: ""
              name: nodeproc
            - hostPath:
                path: /opt/cni/bin
                type: ""
              name: cni-bin-dir
            - hostPath:
                path: /etc/cni/net.d
                type: ""
              name: cni-net-dir
            - hostPath:
                path: /var/log/calico/cni
                type: ""
              name: cni-log-dir
            - hostPath:
                path: /var/lib/cni/networks
                type: ""
              name: host-local-net-dir
            - hostPath:
                path: /var/run/nodeagent
                type: DirectoryOrCreate
              name: policysync
      updateStrategy:
        rollingUpdate:
          maxSurge: 0
          maxUnavailable: 1
        type: RollingUpdate
  - apiVersion: apps/v1
    kind: DaemonSet
    metadata:
      annotations:
        deprecated.daemonset.template.generation: "2"
      labels:
        k8s-app: kube-proxy
      name: kube-proxy
      namespace: kube-system
    spec:
      revisionHistoryLimit: 10
      selector:
        matchLabels:
          k8s-app: kube-proxy
      template:
        metadata:
          annotations:
            kubectl.kubernetes.io/restartedAt: "2025-10-24T01:59:44Z"
          creationTimestamp: null
          labels:
            k8s-app: kube-proxy
        spec:
          containers:
            - command:
                - /usr/local/bin/kube-proxy
                - --config=/var/lib/kube-proxy/config.conf
                - --hostname-override=$(NODE_NAME)
              env:
                - name: NODE_NAME
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: spec.nodeName
              image: registry.k8s.io/kube-proxy:v1.31.13
              imagePullPolicy: IfNotPresent
              name: kube-proxy
              resources: {}
              securityContext:
                privileged: true
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
              volumeMounts:
                - mountPath: /var/lib/kube-proxy
                  name: kube-proxy
                - mountPath: /run/xtables.lock
                  name: xtables-lock
                - mountPath: /lib/modules
                  name: lib-modules
                  readOnly: true
          dnsPolicy: ClusterFirst
          hostNetwork: true
          nodeSelector:
            kubernetes.io/os: linux
          priorityClassName: system-node-critical
          restartPolicy: Always
          schedulerName: default-scheduler
          securityContext: {}
          serviceAccount: kube-proxy
          serviceAccountName: kube-proxy
          terminationGracePeriodSeconds: 30
          tolerations:
            - operator: Exists
          volumes:
            - configMap:
                defaultMode: 420
                name: kube-proxy
              name: kube-proxy
            - hostPath:
                path: /run/xtables.lock
                type: FileOrCreate
              name: xtables-lock
            - hostPath:
                path: /lib/modules
                type: ""
              name: lib-modules
      updateStrategy:
        rollingUpdate:
          maxSurge: 0
          maxUnavailable: 1
        type: RollingUpdate
kind: List
metadata: {}
